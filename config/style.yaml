# Style guide for BookForge – Stage 2
version: 1.0
language: ru

about:
  audience: "Техлиды и EdTech/IT продюсеры"
  topic: "Мультиагентная система для написания книг"
  source: "project.yaml"

tone:
  - профессиональный
  - прямой
  - прагматичный

terminology:
  агент: "Автономный модуль с целями, инструментами и политиками, выполняющий часть процесса."
  оркестратор: "Компонент, распределяющий задачи между агентами и синхронизирующий состояние."
  планировщик: "Агент, который строит последовательность шагов (plan) и обновляет её по результатам."
  критик: "Агент-валидатор качества: проверяет факты, стиль, соответствие ТЗ."
  редактор: "Агент, доводящий текст до стиля и макета из style.yaml."
  рутер: "Маршрутизатор задач/фрагментов к подходящему агенту по правилам."
  память: "Долговременное и кратковременное состояние системы (vector store/notes)."
  контекстное_окно: "Объём текста, доступный модели за один проход."
  RAG: "Retrieval-Augmented Generation: генерация на основе найденных источников."
  инструмент: "Внешняя функция/API/скрипт, доступный агенту через вызов tool."
  политика: "Набор правил поведения агента (стоп-слова, лимиты, ошибки)."
  JSON_схема: "Контракт структуры данных, которую обязан выдавать агент."
  пайплайн: "Последовательность стадий обработки от брифа до публикации."
  idempotency: "Повтор запуска даёт тот же результат без дублей и побочных эффектов."
  телеметрия: "Логи, метрики, трассировки, события качества."
  артефакт: "Материальный результат этапа (yaml/md/docx/pdf/epub)."
  чеклист: "Список обязательных проверок перед переходом на следующий этап."
  дедупликация: "Удаление дубликатов и схожих фрагментов по метрике похожести."
  грейдинг: "Оценка качества по метрикам (style, facts, length, originality)."

forbidden:
  клише:
    - "инновационные инновации"
    - "не имеющий аналогов"
    - "уникальный уникальный"
    - "в кратчайшие сроки без затрат"
    - "прорывной во всех смыслах"
    - "на порядок лучше"
    - "магия ИИ"
    - "ИИ всё сделает сам"
    - "как известно"
    - "следует отметить"
    - "в целом"
  лексика:
    - жаргон без пользы: ["чиллим", "огонь", "бомбически"]
    - маркетинговая гипербола вместо фактов
    - пассив без причины: "было принято решение"
  стиль:
    - длинные предложения > 25 слов
    - повтор одного слова > 2 раз в абзаце, если есть синоним
    - растянутые метафоры и фиолетовый слог

paragraph_rules:
  длина_в_предложениях: "2–5"
  цель: "Каждый абзац решает одну мысль: зачем, что, как, результат."
  форматирование:
    списки: "Используй маркированные/нумерованные, если >2 пункта."
    коды_и_названия: "Файлы/ключи в `моноширинном` формате."
    примечания: "Краткие блоки Note/Warning допускаются."

sentence_rules:
  длина_в_словах: "8–16 (макс. 22)"
  лицо: "2-е лицо для инструкций, 3-е для описаний."
  активный_залог: true
  термины:
    первое_упоминание: "Термин + краткое объяснение в скобках."
    консистентность: "Используй термины из terminology без вариантов."
  числа_и_метрики: "Давай конкретику: проценты, лимиты, пути, команды."

examples:
  - title: "Маркетинговая гипербола → инженерная конкретика"
    before: |
      Наша мультиагентная платформа не имеет аналогов и кардинально ускоряет работу.
    after: |
      Система включает оркестратор и четыре роли (планировщик, автор, критик, редактор).
      Среднее время главы 2–3 тыс. слов — 18 мин при контекстном окне 64К.
  - title: "Пассив → актив"
    before: |
      Было принято решение использовать RAG для повышения качества.
    after: |
      Оркестратор включает RAG на стадиях 3 и 5. Критик отбрасывает ответы без трёх источников.
  - title: "Длиннота → коротко и по делу"
    before: |
      Агент, который отвечает за проверку качества, в некоторых случаях может дополнительно инициировать повторную генерацию...
    after: |
      Критик перегенерирует текст, если нарушены длина, стиль или факты.
  - title: "Пустые вводные → действие"
    before: |
      Как известно, процесс публикации достаточно сложен.
    after: |
      Публикация состоит из трёх шагов: сбор артефактов, валидация шаблонов, экспорт в DOCX/PDF/EPUB.
  - title: "Клише → измеримые критерии"
    before: |
      Результат получается на порядок лучше.
    after: |
      Factual-score ≥ 0.9, стиль-оценка ≥ 0.85, время сборки ≤ 10 мин на 160 стр.

lint:
  max_sentence_len: 22
  target_sentence_len: [8, 16]
  max_paragraph_sentences: 5
  passive_voice_allowed: false
  banned_phrases:
    - "инновационные инновации"
    - "не имеющий аналогов"
    - "уникальный уникальный"
    - "в кратчайшие сроки без затрат"
    - "прорывной во всех смыслах"
    - "на порядок лучше"
    - "магия ИИ"
    - "ИИ всё сделает сам"
    - "как известно"
    - "следует отметить"
    - "в целом"
  require_metrics_for_claims: true
  defaults:
    glob: "drafts/**/*.md"
